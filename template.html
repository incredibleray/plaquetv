<!DOCTYPE html>
<html lang="en">
<head>
    <title>Budda Carousel</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
       <link rel="stylesheet" href="bootstrap.min.css">
       <script src="./jquery.min.js"></script>
       <script src="./bootstrap.min.js"></script>
    <link rel="stylesheet" href="./fade.css">
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script> -->
    <style>
        .container {
            /*background-color: white;*/
            background-color: #f7cd5d;
            width: 100%;
            height: 100vh;
        }

        .column {
            float: left;
            /*width: 25%;*/
            /*padding: 5px;*/
            /*padding-top: 5px;*/
            /*padding-bottom: 5px;*/
        }

        .row::after {
            content: "";
            clear: both;
            display: table;
        }

        .carousel-indicators li {
            border: 1px solid red;
            opacity: 0;
        }
        .carousel-control, .carousel-control.right, .carousel-control.left {
                 opacity: 0
                }
    </style>
    <script type="text/javascript">
        window.onload = function () {
            var rows = {{rows}};
            var pics = {{n}}
            var pic_urls = [
                {{pic_url}}
            ]
            var pic_width = 145;
            var pic_height = 450;

            var container_width = $(".container").outerWidth(true);
            var container_height = $(".container").outerHeight(true) - 20;

            // $("#dim").text("Dimension:" + container_width + "x" + container_height);

            // var rows = (container_height / pic_height).toFixed(0);
            var scale = container_height / (rows * pic_height);

            var pic_disp_width = pic_width * scale;

            var cols = parseInt(container_width / pic_disp_width);
            // var pic_padding = parseInt((container_width - cols * pic_disp_width) / cols);

            var padding_left_width = ((container_width - pic_disp_width * cols) / 2).toFixed(0);

            // var pic_padding = 0;
            var pics_per_page = rows * cols;

            console.log("width = ", container_width);
            console.log("height = ", container_height);
            console.log("rows", rows);
            console.log("cols", cols);
            console.log("scale", scale);
            // console.log("pic padding", pic_padding)

            var html = '';
            var li_html = '';
            var point = 0;
            for (var j = 1; j <= pics; j++) {
                if (j == 1) {
                    html += '<div class="item active"><div class="row" style="padding-left:' + padding_left_width + 'px;">';
                    li_html += '<li data-target="#myCarousel" data-slide-to="' + point + '" class="active"></li>';
                } else if (j % pics_per_page == 1) {
                    html += '<div class="item "><div class="row" style="padding-left:' + padding_left_width + 'px;">';
                }
                // html += '<div class="column" ><img src="pic' + j + '.png" width="' + pic_disp_width + '"/></div>';
                html += '<div class="column" ><img src="' + pic_urls[j - 1] + '" width="' + pic_disp_width + '"/></div>';
                if (j % pics_per_page == 0 || j == pics) {
                    html += '</div></div>';
                }
                if (j % pics_per_page == 0 && j < pics) {
                    point += 1;
                    html += '</div></div>';
                    li_html += '<li data-target="#myCarousel" data-slide-to="' + point + '"></li>';
                }

            }
            $(".carousel-inner").append(html);
            $(".carousel-indicators").append(li_html);
          }
    </script>
</head>

<body>
<div class="container">
    <div id="myCarousel" class="carousel slide carousel-fade" data-ride="carousel" data-interval=3000>
        <!-- Indicators -->
        <ol class="carousel-indicators">

        </ol>

        <!-- Wrapper for slides -->
        <div class="carousel-inner">

        </div>

        <!-- Left and right controls -->
        <a class="left carousel-control" href=" " data-slide="prev">
            <!-- <span class="glyphicon glyphicon-chevron-left"></span> -->
            <span class="sr-only">Previous</span>
            <!--                    <span id="dim" style="font-size:50px;">aaaa</span>-->
        </a>
        <a class="right carousel-control" href="#myCarousel" data-slide="next">
            <!-- <span class="glyphicon glyphicon-chevron-right"></span> -->
            <span class="sr-only">Next</span>
        </a>
    </div>
</div>
</body>
</html>
